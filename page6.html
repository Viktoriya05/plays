<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞: –£–≥–∞–¥–∞–π –î–ù–§</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f3ff;
            color: #4a3b76;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            flex-direction: column;
        }
        h1 {
            color: #6a52ad;
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        .game-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(106, 82, 173, 0.1);
            width: 350px;
            border: 2px solid #b8a3ff;
            text-align: center;
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #6a52ad;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #d4c7ff;
            border-radius: 8px;
            font-size: 14px;
            background-color: #f9f7ff;
            color: #4a3b76;
        }
        button {
            background-color: #8a6de8;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s ease;
            margin: 5px;
        }
        button:hover {
            background-color: #7a5dd8;
        }
        #result {
            margin-top: 25px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            width: 350px;
            text-align: center;
            font-size: 16px;
            color: #4a3b76;
            border: 2px solid #b8a3ff;
            box-shadow: 0 4px 15px rgba(106, 82, 173, 0.1);
        }
        .home-button {
            margin-top: 20px;
            background-color: #8a6de8;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            transition: background-color 0.3s ease;
            font-weight: 600;
        }
        .home-button:hover {
            background-color: #7a5dd8;
        }
        .visualization {
            margin: 15px 0;
        }
        .visualization img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            display: none;
        }
        .correct {
            color: #4caf50;
        }
        .incorrect {
            color: #ff6b6b;
        }
        .dnf-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }
        .dnf-buttons button {
            padding: 8px 10px;
            font-size: 14px;
        }
        #dnfInput {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>–ò–≥—Ä–∞: –£–≥–∞–¥–∞–π –î–ù–§</h1>
    <div class="game-container">
        <p id="vectorDisplay">–í–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏: </p>
        
        <label>–í–≤–µ–¥–∏—Ç–µ –î–ù–§:</label>
        <div class="dnf-buttons">
            <button onclick="insertSymbol('(')">(</button>
            <button onclick="insertSymbol(')')">)</button>
            <button onclick="insertSymbol('‚àß')">‚àß</button>
            <button onclick="insertSymbol('‚à®')">‚à®</button>
            <button onclick="insertSymbol('¬¨')">¬¨</button>
            <button onclick="insertSymbol('x‚ÇÅ')">x‚ÇÅ</button>
            <button onclick="insertSymbol('x‚ÇÇ')">x‚ÇÇ</button>
            <button onclick="clearInput()">–û—á–∏—Å—Ç–∏—Ç—å</button>
            <button onclick="backspace()">‚Üê</button>
        </div>
        
        <input type="text" id="dnfInput" placeholder="–ü—Ä–∏–º–µ—Ä: (x‚ÇÅ ‚àß ¬¨x‚ÇÇ) ‚à® (¬¨x‚ÇÅ ‚àß x‚ÇÇ)" readonly>
        
        <button id="checkButton" style="width: 100%; margin: 0;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </div>
    
    <div id="result">
        <div class="visualization">
            <img id="resultImage" src="" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç">
        </div>
        <p>–í–≤–µ–¥–∏—Ç–µ –î–ù–§, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ–∫—Ç–æ—Ä—É —Ñ—É–Ω–∫—Ü–∏–∏</p>
    </div>

    <a href="index.html" class="home-button">–î–æ–º–æ–π</a>

    <script>
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –¥–ª–∏–Ω—ã 4
        function generateRandomVector() {
            return Array.from({ length: 4 }, () => Math.floor(Math.random() * 2));
        }

        // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –≤ –î–ù–§
        function vectorToDNF(vector) {
            const variables = ['x‚ÇÅ', 'x‚ÇÇ'];
            let dnf = [];
            for (let i = 0; i < vector.length; i++) {
                if (vector[i] === 1) {
                    const binary = i.toString(2).padStart(2, '0');
                    let term = [];
                    for (let j = 0; j < binary.length; j++) {
                        term.push(binary[j] === '0' ? `¬¨${variables[j]}` : variables[j]);
                    }
                    dnf.push(`(${term.join(' ‚àß ')})`);
                }
            }
            return dnf.join(' ‚à® ');
        }

        // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        function normalizeFormula(formula) {
            return formula
                .replace(/\s+/g, '') // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—Ä–æ–±–µ–ª—ã
                .replace(/‚àß/g, '&')   // –ó–∞–º–µ–Ω—è–µ–º ‚àß –Ω–∞ &
                .replace(/‚à®/g, '|')   // –ó–∞–º–µ–Ω—è–µ–º ‚à® –Ω–∞ |
                .replace(/¬¨/g, '!')   // –ó–∞–º–µ–Ω—è–µ–º ¬¨ –Ω–∞ !
                .replace(/x‚ÇÅ/g, 'x1') // –ó–∞–º–µ–Ω—è–µ–º x‚ÇÅ –Ω–∞ x1
                .replace(/x‚ÇÇ/g, 'x2') // –ó–∞–º–µ–Ω—è–µ–º x‚ÇÇ –Ω–∞ x2
                .toLowerCase();       // –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        let currentVector = generateRandomVector();
        let correctDNF = vectorToDNF(currentVector);
        const resultImage = document.getElementById('resultImage');

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞
        document.getElementById('vectorDisplay').textContent = `–í–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏: [${currentVector.join(', ')}]`;

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤–≤–æ–¥–∞
        function insertSymbol(symbol) {
            const input = document.getElementById('dnfInput');
            const startPos = input.selectionStart;
            const endPos = input.selectionEnd;
            const currentValue = input.value;
            
            input.value = currentValue.substring(0, startPos) + symbol + currentValue.substring(endPos);
            input.focus();
            input.setSelectionRange(startPos + symbol.length, startPos + symbol.length);
        }

        function clearInput() {
            document.getElementById('dnfInput').value = '';
            document.getElementById('dnfInput').focus();
        }

        function backspace() {
            const input = document.getElementById('dnfInput');
            const startPos = input.selectionStart;
            const endPos = input.selectionEnd;
            const currentValue = input.value;
            
            if (startPos === endPos && startPos > 0) {
                input.value = currentValue.substring(0, startPos - 1) + currentValue.substring(endPos);
                input.setSelectionRange(startPos - 1, startPos - 1);
            } else {
                input.value = currentValue.substring(0, startPos) + currentValue.substring(endPos);
                input.setSelectionRange(startPos, startPos);
            }
            input.focus();
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–µ–¥–µ–Ω–Ω–æ–π –î–ù–§
        document.getElementById('checkButton').addEventListener('click', function() {
            const userDNF = document.getElementById('dnfInput').value.trim();
            const resultDiv = document.getElementById('result');
            
            // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –æ–±–µ —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            const normalizedUserDNF = normalizeFormula(userDNF);
            const normalizedCorrectDNF = normalizeFormula(correctDNF);
            
            console.log("User DNF:", normalizedUserDNF);
            console.log("Correct DNF:", normalizedCorrectDNF);
            
            if (normalizedUserDNF === normalizedCorrectDNF) {
                resultImage.src = "https://sun9-9.userapi.com/impg/bp2dGjGJTnIe1riA87WhNTAhOOvIdEXWLY17Bg/tjT4r1A0YjI.jpg?size=512x512&quality=96&sign=369ce60465fa9070dfda3be16e37f971&type=album";
                resultImage.style.display = "block";
                resultDiv.innerHTML = `
                    <div class="visualization">
                        <img src="https://sun9-9.userapi.com/impg/bp2dGjGJTnIe1riA87WhNTAhOOvIdEXWLY17Bg/tjT4r1A0YjI.jpg?size=512x512&quality=96&sign=369ce60465fa9070dfda3be16e37f971&type=album" alt="–ü—Ä–∞–≤–∏–ª—å–Ω–æ" style="display:block;">
                    </div>
                    <p class="correct">–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ</p>
                    <p>${correctDNF}</p>
                `;
            } else {
                resultImage.src = "https://i.pinimg.com/originals/93/32/c7/9332c708b22cdc5f2df7a3f61e9cc206.webp";
                resultImage.style.display = "block";
                resultDiv.innerHTML = `
                    <div class="visualization">
                        <img src="https://i.pinimg.com/originals/93/32/c7/9332c708b22cdc5f2df7a3f61e9cc206.webp" alt="–ù–µ–≤–µ—Ä–Ω–æ" style="display:block;">
                    </div>
                    <p class="incorrect">–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</p>
                    <p>${correctDNF}</p>
                `;
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞
            currentVector = generateRandomVector();
            correctDNF = vectorToDNF(currentVector);
            document.getElementById('vectorDisplay').textContent = `–í–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏: [${currentVector.join(', ')}]`;
            document.getElementById('dnfInput').value = '';
        });
    </script>
</body>
</html>